<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Connectivity QR Toolkit — eSIM & Wi-Fi (Offline)</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#0b0e13" />
</head>
<body>

  <!-- Top bar -->
  <header class="topbar" role="banner">
    <div class="brand"><strong>Connectivity QR Toolkit</strong></div>
    <nav aria-label="Actions">
      <button class="btn btn-ghost" id="installPWA" hidden>Install</button>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero" role="region" aria-labelledby="heroTitle">
    <h1 id="heroTitle" class="hero-title">eSIM & Wi-Fi QR <span class="underline">Generator</span></h1>
    <p class="hero-subtitle">Offline, privacy-first. Generate and print eSIM/Wi-Fi QR codes — no uploads.</p>
    <div class="hero-actions">
      <button class="btn btn-primary" id="startNow">Start now</button>
      <div class="hint">Single-file app · Works offline · No data leaves your browser</div>
    </div>
  </section>

  <!-- Mini tools (3 u 1) -->
  <section class="tools-section" aria-label="Mini tools">
    <div class="toolcards">
      <button id="toolEsim" class="toolcard" aria-controls="view-esim">
        <div class="toolcard-head">
          <span class="tool-title">eSIM QR</span>
        </div>
        <div class="tool-desc">SM-DP+ + Activation (optional Matching) → PNG</div>
      </button>

      <button id="toolWifi" class="toolcard" aria-controls="view-wifi">
        <div class="toolcard-head">
          <span class="tool-title">Wi-Fi QR</span>
        </div>
        <div class="tool-desc">SSID, WPA2 (or open), Hidden → PNG</div>
      </button>

      <button id="toolSheets" class="toolcard" aria-controls="view-sheets">
        <div class="toolcard-head">
          <span class="tool-title">PDF Sheet</span>
        </div>
        <div class="tool-desc">Use last generated QR → A4 grid (3×4 / 4×5)</div>
      </button>
    </div>
  </section>

  <!-- === VIEWS (po jedan panel po alatu) === -->

  <!-- View: eSIM (Lite) -->
  <section id="view-esim" class="view hidden" aria-label="eSIM tool">
    <section class="panel">
      <h3 class="section-title">eSIM QR</h3>

      <div class="good-print">
        <span class="dot ok"></span>
        <span>Print-ready preset: ECC Q · 512 px · 8 px quiet zone</span>
      </div>

      <div class="custom-panel" aria-live="polite">
        <div>
          <label for="smdp">SM-DP+ address</label>
          <input id="smdp" placeholder="smdp.example.com" autocomplete="off"/>
        </div>
        <div>
          <label for="activation">Activation code</label>
          <input id="activation" placeholder="1234-5678-90AB-CDEF" autocomplete="off"/>
        </div>
        <div>
          <label for="matching">Matching ID (optional)</label>
          <input id="matching" placeholder="" autocomplete="off"/>
        </div>
        <div style="grid-column:1/-1">
          <label for="lpaRaw">LPA string</label>
          <textarea id="lpaRaw" rows="3" class="mono" placeholder="LPA:1$..."></textarea>
        </div>
      </div>

      <section class="result-section" aria-live="polite">
        <div class="qr-wrap"><canvas id="qrEsim"></canvas></div>
        <div id="lpaOut" class="hint mono"></div>
        <div class="result-actions">
          <a id="dlEsim" class="btn btn-secondary" download="esim-qr.png">Download PNG</a>
          <button id="copyLpa" class="btn btn-primary" type="button">Copy LPA</button>
        </div>
      </section>
    </section>
  </section>

  <!-- View: Wi-Fi (Lite) -->
  <section id="view-wifi" class="view hidden" aria-label="Wi-Fi tool">
    <section class="panel">
      <h3 class="section-title">Wi-Fi QR</h3>

      <div class="good-print">
        <span class="dot ok"></span>
        <span>Print-ready preset: ECC Q · 512 px · 8 px quiet zone</span>
      </div>

      <div class="custom-panel">
        <div>
          <label for="ssid">SSID</label>
          <input id="ssid" placeholder="Network name" autocomplete="off"/>
        </div>
        <div>
          <label for="security">Security</label>
          <select id="security">
            <option value="WPA">WPA/WPA2</option>
            <option value="nopass">Open (no password)</option>
          </select>
        </div>
        <div>
          <label for="wifiPass">Password</label>
          <input id="wifiPass" placeholder="" autocomplete="off"/>
        </div>
        <div>
          <label for="hidden">Hidden</label>
          <select id="hidden">
            <option value="false">No</option>
            <option value="true">Yes</option>
          </select>
        </div>
        <div style="grid-column:1/-1">
          <label for="wifiRaw">WIFI string</label>
          <textarea id="wifiRaw" rows="3" class="mono" placeholder="WIFI:T:WPA;S:...;P:...;H:false;;"></textarea>
        </div>
      </div>

      <section class="result-section" aria-live="polite">
        <div class="qr-wrap"><canvas id="qrWifi"></canvas></div>
        <div id="wifiOut" class="hint mono"></div>
        <div class="result-actions">
          <a id="dlWifi" class="btn btn-secondary" download="wifi-qr.png">Download PNG</a>
          <button id="copyWifi" class="btn btn-primary" type="button">Copy WIFI</button>
        </div>
      </section>
    </section>
  </section>

  <!-- View: PDF Sheet (Lite) -->
  <section id="view-sheets" class="view hidden" aria-label="PDF sheet">
    <section class="panel">
      <h3 class="section-title">PDF Sheet</h3>

      <div class="custom-panel">
        <div>
          <label for="grid">A4 grid</label>
          <select id="grid">
            <option value="3x4">3×4 (12 per page)</option>
            <option value="4x5">4×5 (20 per page)</option>
          </select>
        </div>
        <div>
          <label for="labelAll">Text under each QR (optional)</label>
          <input id="labelAll" type="text" placeholder="Label"/>
        </div>
        <div class="row" style="grid-column:1/-1">
          <button id="previewPDF" class="btn btn-secondary" type="button">Preview PDF</button>
          <button id="downloadPDF" class="btn btn-primary" type="button">Download PDF</button>
        </div>
        <div class="hint">Uses the last generated QR (eSIM or Wi-Fi).</div>
      </div>

      <div class="pdf-preview" id="pdfPreview" hidden>
        <iframe id="pdfFrame" title="PDF preview"></iframe>
      </div>
    </section>
  </section>

  <!-- Footer -->
  <footer class="footer" role="contentinfo">
    <div>Privacy-first · Works offline · No uploads. This tool formats existing eSIM/Wi-Fi data; nothing is sent or stored.</div>
  </footer>

  <!-- Vendor (local) -->
  <script src="./vendor/qrcode.min.js" defer></script>
  <script src="./vendor/jspdf.umd.min.js" defer></script>

  <!-- App -->
  <script type="module" src="./app.js"></script>
</body>
</html>
